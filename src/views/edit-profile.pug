extends base.pug
include mixins/video

block content
    p=errorMessage
    form(method="POST",enctype="multipart/form-data").auth__form.profile__form
        label(for="avatar").profile__form-avatar
            img(src=`${loggedInUser.avatarUrl && loggedInUser.avatarUrl.startsWith('uploads') ? "/"+loggedInUser.avatarUrl : loggedInUser.avatarUrl}`,width="100",height="100")#preview-image
            span 새 이미지 업로드
            input(type="file",id="avatar",name="avatar",accept="image/*").input-image
        input(name="email",type="email",placeholder="이메일",required,autocomplete="off",autocapitalize="off",value=loggedInUser.email)
        input(name="name",type="text",placeholder="이름",required,autocomplete="chrome-off",value=loggedInUser.name)
        input(name="location",type="text",placeholder="위치",required,autocomplete="chrome-off",value=loggedInUser.location)    
        input(type="submit",value="업데이트")   
        if !loggedInUser.socialOnly  
            div.profile__form-manage
                a(href="change-password").profile__form-changepassword change password
                a(href="leave-account").profile__form-leaveaccount leave account
    div.video-grid
        each video in user.videos
            +video(video)                        
        else 
            span.empty__message 업로드한 비디오가 없습니다.
block scripts
    script(src="/assets/js/profile.js")
        